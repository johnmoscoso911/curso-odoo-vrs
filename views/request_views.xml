<?xml version="1.0"?>
<odoo>
    <!-- FORM VIEW -->
    <record id="vrs_request_form_view" model="ir.ui.view">
        <field name="name">vrs.request.form</field>
        <field name="model">vrs.request</field>
        <field name="arch" type="xml">
            <form string="Request">
                <header/>
                <sheet>
                    <field name="requester_id" invisible="1"/>
                    <field name="parent_id" invisible="1"/>
                    <group>
                        <group>
                            <field name="start_date" required="1"/>
                        </group>
                        <group>
                            <field name="end_date" required="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Comments">
                            <field name="comments" widget="html" nolabel="1"/>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <!-- SEARCH VIEW -->
    <record id="vrs_request_filter_view" model="ir.ui.view">
        <field name="name">vrs.request.filter</field>
        <field name="model">vrs.request</field>
        <field name="arch" type="xml">
            <search string="Request">
                <filter domain="[('start_date', '&gt;', (context_today() - datetime.timedelta(days=30)).strftime('%%Y-%%m-%%d'))]"
                        string="Last 30 days"
                        name="last_days"/>
                <separator/>
                <group expand="0" string="Group By">
                    <filter name="group_by_month" string="Monthly" context="{'group_by': 'start_date:month'}"/>
                </group>
            </search>
        </field>
    </record>
    <!-- ACTION -->
    <record id="action_vrs_request" model="ir.actions.act_window">
        <field name="name">Request</field>
        <field name="res_model">vrs.request</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_last_days': 1}</field>
        <field name="domain">[('requester_id.user_id','=',uid)]</field>
    </record>
</odoo>